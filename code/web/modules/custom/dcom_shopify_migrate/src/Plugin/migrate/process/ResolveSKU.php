<?php

namespace Drupal\dcom_shopify_migrate\Plugin\migrate\process;

use Drupal\commerce_product\ProductVariationStorageInterface;
use Drupal\dcom_shopify_migrate\SkuResolverInterface;
use Drupal\migrate\MigrateExecutableInterface;
use Drupal\migrate\Plugin\migrate\process\MigrationLookup;
use Drupal\migrate\Plugin\MigratePluginManagerInterface;
use Drupal\migrate\Plugin\MigrationInterface;
use Drupal\migrate\Plugin\MigrationPluginManagerInterface;
use Drupal\migrate\Row;
use Symfony\Component\DependencyInjection\ContainerInterface;

/**
 * Custom process plugin for mapping Shopify product variants to SKUs.
 *
 * @code
 * process:
 *   name:
 *     plugin: dcom_shopify_resolve_sku
 *     shop_domain: XXX.myshopify.com
 *     api_key: xxx
 *     password: xxx
 *     shared_secret: xxx
 *
 * @endcode
 *
 * @MigrateProcessPlugin(
 *   id = "dcom_shopify_resolve_sku"
 * )
 */
class ResolveSKU extends MigrationLookup {

  /**
   * SKU resolver service.
   *
   * @var \Drupal\dcom_shopify_migrate\SkuResolverInterface
   */
  protected $resolver;

  /**
   * The product variation storage.
   *
   * @var \Drupal\commerce_product\ProductVariationStorageInterface
   */
  protected $productVariationStorage;

  /**
   * ResolveSKU constructor.
   *
   * @param array $configuration
   *   A configuration array containing information about the plugin instance.
   * @param string $plugin_id
   *   The plugin ID.
   * @param mixed $plugin_definition
   *   The plugin implementation definition.
   * @param \Drupal\dcom_shopify_migrate\SkuResolverInterface $resolver
   *   SKU resolver service.
   * @param \Drupal\commerce_product\ProductVariationStorageInterface $product_variation_storage
   *   The product variation storage.
   */
  public function __construct(array $configuration, $plugin_id, $plugin_definition, MigrationInterface $migration, MigrationPluginManagerInterface $migration_plugin_manager, MigratePluginManagerInterface $process_plugin_manager, SkuResolverInterface $resolver, ProductVariationStorageInterface $product_variation_storage) {
    parent::__construct($configuration, $plugin_id, $plugin_definition, $migration, $migration_plugin_manager, $process_plugin_manager);
    $this->resolver = $resolver;
    $this->productVariationStorage = $product_variation_storage;
  }

  /**
   * {@inheritdoc}
   */
  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition, MigrationInterface $migration = NULL) {
    /** @var \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager */
    $entity_type_manager = $container->get('entity_type.manager');
    return new static(
      $configuration,
      $plugin_id,
      $plugin_definition,
      $migration,
      $container->get('plugin.manager.migration'),
      $container->get('plugin.manager.migrate.process'),
      $container->get('dcom_shopify_migrate.sku_resolver'),
      $entity_type_manager->getStorage('commerce_product_variation')
    );
  }

  /**
   * {@inheritdoc}
   */
  public function transform($value, MigrateExecutableInterface $migrate_executable, Row $row, $destination_property) {
    $removed_variants_mapping = $this->getRemovedProductVariantMapping();

    // Case 1: product variant id is empty, but there is a mapping for the
    // source id (e.g. order item id=>sku).
    if (empty($value)) {
      $source_id = reset($row->getSourceIdValues());
      $empty_variant_mapping = $this->getEmptyProductVariantIdMapping();

      if (!empty($empty_variant_mapping[$source_id])) {
        $sku = $empty_variant_mapping[$source_id];
        if ($variation = $this->productVariationStorage->loadBySku($sku)) {
          return $variation->id();
        }
      }
    }
    // Case 2: Product variant is imported earlier but then removed from Drupal.
    elseif (!empty($removed_variants_mapping[$value])) {
      $sku = $removed_variants_mapping[$value];
      if ($variation = $this->productVariationStorage->loadBySku($sku)) {
        return $variation->id();
      }
    }
    // Case 3: try to get a variant id from the specified migration.
    elseif ($variation_id = parent::transform($value, $migrate_executable, $row, $destination_property)) {
      return $variation_id;
    }
    // Case 4: try to get a variant id by sku.
    else {
      $sku = $row->getSourceProperty('sku');
      $empty_sku_mapping = $this->getEmptySkuMapping();

      // Try to load a product variation by SKU.
      if ($sku && ($variation = $this->productVariationStorage->loadBySku($sku))) {
        return $variation->id();
      }
      // Otherwise try to get a variant ID from the predefined mapping.
      elseif (!empty($empty_sku_mapping[$value])) {
        $sku = $empty_sku_mapping[$value];
        if ($variation = $this->productVariationStorage->loadBySku($sku)) {
          return $variation->id();
        }
      }
    }

    return FALSE;
  }

  /**
   * Returns a mapping.
   *
   * A mapping for product variants which were imported earlier, but now it are
   * removed.
   *
   * @return array
   *   An array keyed by product variant id => SKU.
   */
  protected function getRemovedProductVariantMapping() {
    return [
      '4530016780329' => '617762441059',
      '4530024415273' => '617762441066',
      '4489979985961' => '617762434747',
      '4489936175145' => '617762434808',
      '4489972383785' => '850183005824',
      '4618890575913' => '850183005831',
      '4529867325481' => '617762441004',
      '43415219152' => '617762441011',
    ];
}

  /**
   * Returns a mapping for order items whith empty product variant ids.
   *
   * @return array
   *   An array keyed by shopify order item ID => SKU.
   */
  protected function getEmptyProductVariantIdMapping() {
    return [
      '755460767785' => '617762438547',
      '2668690693' => '617762440946',
      '4062927877' => '617762440984',
      '4062899909' => '617762440984',
      '4056633669' => '617762440984',
      '4031903045' => '617762440984',
      '4027687429' => '617762440984',
      '4017549189' => '617762440984',
      '3980396933' => '617762440984',
      '3969666885' => '617762440984',
      '3913534661' => '617762440984',
      '3882034885' => '617762440984',
      '3850296453' => '617762440984',
      '3834411845' => '617762440984',
      '9295917584' => '617762441080',
      '9243040784' => 'DSCNTND',
      '4748684677' => '617762438837-MANG',
      '4479794117' => '617762438837-MANG',
      '4362634629' => '617762438837-MANG',
      '2717456965' => '617762438837-MANG',
      '3975018501' => '617762438837-WTRM',
      '4727745349' => '617762438844-MANG',
      '4702946501' => '617762438844-MANG',
      '4542331205' => '617762438844-MANG',
      '3173322821' => '617762438844-MANG',
      '9670617104' => '617762438844-WTRM',
      '4614701381' => '617762438844-WTRM',
      '4525107717' => '617762438844-WTRM',
      '4332683013' => '617762438844-WTRM',
      '9658048272' => '617762438851-TRPK',
      '4812980293' => '617762438868-MANG',
      '4056633605' => '617762438868-MANG',
      '4898997253' => '617762438868-WTRM',
      '4678441925' => '617762438868-WTRM',
      '4596799429' => '617762438868-WTRM',
      '4508720325' => '617762438868-WTRM',
      '4453097093' => '617762438868-WTRM',
      '4263389957' => '617762438868-WTRM',
      '4176453125' => '617762438868-WTRM',
      '3817616453' => '617762438868-WTRM',
      '9560597904' => '766567229543-BRRY',
      '697148473385' => 'MARKETING-CATALOG1',
      '700827992105' => 'dropper-black-30',
      '8817346448' => 'DSCNTND',
      '9356256912' => 'DSCNTND',
      '667178106921' => 'DSCNTND',
      '8877046352' => 'DSCNTND',
      '607591137321' => 'tmp-617762440823',
    ];
  }

  /**
   * Returns a mapping for order items which product variants has empty SKU.
   *
   * @return array
   *   An array keyed by product variant id => SKU.
   */
  protected function getEmptySkuMapping() {
    return [
      '16697294661' => '617762438837-CHRY',
      '17045212741' => '617762438837-APLP',
      '19356165637' => '617762438912-PEAN',
      '19356244549' => '617762438912-VNCU',
      '19355735109' => '617762438912-CHOS',
      '19355766533' => '617762438912-CHUR',
      '19355771269' => '617762438912-CIND',
      '19356221573' => '617762438912-STRY',
      '19355716933' => '617762438912-CHEE',
      '19355707525' => '617762438912-CERK',
      '19356361669' => '617762438912-WHIT',
      '19356239237' => '617762438912-TBCO',
      '19355604293' => '617762438912-BELG',
      '19355564037' => '617762438912-APLR',
      '19355843909' => '617762438912-CRUN',
      '19356017605' => '617762438912-HNMI',
      '19355538949' => '617762438912-APLP',
      '19356050437' => '617762438929-MARY',
      '19356236165' => '617762438912-TSTD',
      '19355362181' => '617762441004',
      '19356097925' => '617762438912-PECH',
      '19356360517' => '617762438912-WTRM',
      '19356226757' => '617762438912-SWED',
      '19355996421' => '617762438912-GUVA',
      '19356163717' => '617762438912-PBCU',
      '19355718853' => '617762438912-CHRY',
      '19355992325' => '617762438912-GRPE',
      '19356192325' => '617762438912-POME',
      '19356188997' => '617762438912-PINA',
      '19356229957' => '617762438912-SWRS',
      '19356187333' => '617762438912-PEPP',
      '19355613381' => '617762438912-BLUE',
      '19355632133' => '617762438912-BUBB',
      '19355975429' => '617762438912-FROS',
      '19356038405' => '617762438912-JUJU',
      '19356210885' => '617762438912-STRC',
      '19356241605' => '617762438912-VNCP',
      '19356053061' => '617762438912-MINT',
      '19356204485' => '617762438912-SILY',
      '19355790277' => '617762438912-CKIE',
      '19355659973' => '617762438912-CKBT',
      '19355795525' => '617762438912-COTT',
      '19356048965' => '617762438912-MANG',
      '19356247237' => '617762438912-VNIC',
      '19356196805' => '617762438912-RNCN',
      '19355999813' => '617762438912-HRCD',
      '19355704005' => '617762438912-CRML',
      '19356189957' => '617762438912-PNPL',
      '19356008837' => '617762438103-GUMM',
      '19356055237' => '617762438912-MOCH',
      '19355951173' => '617762438912-FREN',
      '19356214021' => '617762438912-STRW',
      '19355989509' => '617762438912-FRUI',
      '19355589765' => '617762438912-BAVA',
      '19356029701' => '617762438912-HNDW',
      '19355685061' => '617762438912-CNTL',
      '19355787141' => '617762438912-COCO',
      '19356057093' => '617762438912-ORIC',
      '19355827333' => '617762438912-CRNB',
      '19355645253' => '617762438912-BUTR',
      '19355481349' => '617762438912-APPL',
      '19355551813' => '617762438912-BANA',
      '19355481413' => '617762438912-ACAI',
      '19356044101' => '617762438912-LEMO',
      '19356218821' => '617762438912-STRS',
      '19356223045' => '617762438912-SUGA',
      '19356046981' => '617762438912-LIME',
      '19356200133' => '617762438912-RUBY',
      '19355922117' => '617762438912-DULC',
      '19355576261' => '617762438912-BNCR',
      '20169410373' => '617762438110-STRY',
      '20169410053' => '617762438110-STRC',
      '20169405381' => '617762440953',
      '20169410501' => '617762438110-SWED',
      '20169405509' => '617762438110-ACAI',
      '20169406149' => '617762438110-BLUE',
      '20169407941' => '617762438110-GRPE',
      '20169406085' => '617762438110-BELG',
      '20169406213' => '617762438110-BUBB',
      '20169406853' => '617762438110-CHOS',
      '20169406661' => '617762438110-CHEE',
      '20169405701' => '617762438110-APLP',
      '20169407109' => '617762438110-CKIE',
      '20169409157' => '617762438110-PECH',
      '20169408453' => '617762438110-LEMO',
      '20169407301' => '617762438110-CRNB',
      '20169410181' => '617762438110-STRW',
      '20169406341' => '617762438110-CKBT',
      '20169408709' => '617762438110-MARY',
      '20169408645' => '617762438110-MANG',
      '20169409669' => '617762438110-PNPL',
      '20169411077' => '617762438110-WTRM',
      '20169407045' => '617762438110-COCO',
      '20169408133' => '617762438110-GUMM',
      '20169409861' => '617762438110-RNCN',
      '20169407621' => '617762438110-ENER',
      '20169406469' => '617762438110-CRML',
      '20169406725' => '617762438110-CHRY',
      '20169407749' => '617762438110-FROS',
      '20169410821' => '617762438110-VNCP',
      '20169405765' => '617762438110-APLR',
      '20169408965' => '617762438110-ORIC',
      '20169408581' => '617762438110-LEML',
      '20169409605' => '617762438110-PINA',
      '20169408389' => '617762438110-JUJU',
      '20169409733' => '617762438110-POME',
      '20169405573' => '617762438110-APPL',
      '20169410629' => '617762438110-SWRS',
      '20169411013' => '617762438110-VNIC',
      '20169406981' => '617762438110-CIND',
      '20169405957' => '617762438110-BANA',
      '20169407237' => '617762438110-COTT',
      '20169408261' => '617762438110-HNMI',
      '20169408773' => '617762438110-MINT',
      '20169406277' => '617762438110-BUTR',
      '20169434821' => '617762441035',
      '20169435909' => '617762438127-CHRY',
      '20169436677' => '617762438127-FREN',
      '20169437061' => '617762438127-GUMM',
      '20169435141' => '617762438127-BNCR',
      '20169436101' => '617762438127-CIND',
      '20169435717' => '617762438127-CRML',
      '20169438661' => '617762438127-STRS',
      '20169437573' => '617762438127-MINT',
      '20169439301' => '617762438127-WTRM',
      '20169437317' => '617762438127-LEMO',
      '20169438533' => '617762438127-STRC',
      '20169438149' => '617762438127-PINA',
      '20169437509' => '617762438127-MARY',
      '20169438085' => '617762438127-PEPP',
      '20169435397' => '617762438127-BLUE',
      '20169439237' => '617762438127-VNIC',
      '20169435845' => '617762438127-CHEE',
      '20169435269' => '617762438127-BAVA',
      '20169435333' => '617762438127-BELG',
      '20169438597' => '617762438127-STRW',
      '20169437829' => '617762438127-PECH',
      '20169435589' => '617762438127-CKBT',
      '20169435013' => '617762438127-APLP',
      '20169438469' => '617762438127-SILY',
      '20169434885' => '617762438127-ACAI',
      '20169436869' => '617762438127-GRPE',
      '20169438213' => '617762438127-PNPL',
      '20169437253' => '617762438127-JUJU',
      '20169438917' => '617762438127-SWRS',
      '20169439109' => '617762438127-VNCP',
      '20169439173' => '617762438127-VNCU',
      '20169436293' => '617762438127-COTT',
      '20169444805' => '617762441042',
      '20169444933' => '617762438134-APPL',
      '20169447557' => '617762438134-MINT',
      '20169447045' => '617762438134-GUMM',
      '20169446661' => '617762438134-FREN',
      '20169445893' => '617762438134-CHRY',
      '20169449093' => '617762438134-VNCP',
      '20169448069' => '617762438134-PEPP',
      '20169446405' => '617762438134-CRUN',
      '20169447301' => '617762438134-LEMO',
      '20169448581' => '617762438134-STRW',
      '20169446853' => '617762438134-GRPE',
      '20169449285' => '617762438134-WTRM',
      '20169446213' => '617762438134-CKIE',
      '20169446341' => '617762438134-CRNB',
      '20169448133' => '617762438134-PINA',
      '20169449221' => '617762438134-VNIC',
      '20169446469' => '617762438134-CUCU',
      '20169446277' => '617762438134-BRRY',
      '20169447173' => '617762438134-HNDW',
      '20169448645' => '617762438134-STRS',
      '20169447237' => '617762438134-JUJU',
      '20169446085' => '617762438134-CIND',
      '20169446149' => '617762438134-COCO',
      '20169448453' => '617762438134-SILY',
      '20169448901' => '617762438134-SWRS',
      '20169448517' => '617762438134-STRC',
      '20169444869' => '617762438134-ACAI',
      '20169445573' => '617762438134-CKBT',
      '20169447429' => '617762438134-MANG',
      '20169447493' => '617762438134-MARY',
      '20169445701' => '617762438134-CRML',
      '20169447813' => '617762438134-PECH',
      '20169457925' => '617762438134-STRW',
      '20169454149' => '617762441059',
      '20169456901' => '617762438141-MINT',
      '20169455621' => '617762438141-COTT',
      '20169455493' => '617762438141-COCO',
      '20169455749' => '617762438141-CRUN',
      '20169455429' => '617762438141-CIND',
      '20169456197' => '617762438141-GRPE',
      '20169458245' => '617762438141-SWRS',
      '20169457157' => '617762438141-PECH',
      '20169456005' => '617762438141-FREN',
      '20169458117' => '617762438141-SUGA',
      '20169454469' => '617762438141-BNCR',
      '20169454661' => '617762438141-BELG',
      '20169454725' => '617762438141-BLUE',
      '20169454213' => '617762438141-ACAI',
      '20169456069' => '617762438141-FROS',
      '20169457669' => '617762438141-RNCN',
      '20169455237' => '617762438141-CHRY',
      '20169456773' => '617762438141-MANG',
      '20169458629' => '617762438141-WTRM',
      '20169456965' => '617762438141-MOCH',
      '20169458309' => '617762438141-TSTD',
      '20169457413' => '617762438141-PEPP',
      '20169457477' => '617762438141-PINA',
      '20169456837' => '617762438141-MARY',
      '20169455173' => '617762438141-CHEE',
      '20169454533' => '617762438141-BANA',
      '20169458757' => '617762438141-YELO',
      '20169457989' => '617762438141-STRS',
      '20169455557' => '617762438141-CKIE',
      '20169456581' => '617762438141-JUJU',
      '20169458181' => '617762438141-SWED',
      '20169458565' => '617762438141-VNIC',
      '20169457861' => '617762438141-STRC',
      '20169455045' => '617762438141-CRML',
      '20169455685' => '617762438141-CRNB',
      '20169455365' => '617762438141-CHUR',
      '20169454981' => '617762438141-CNTL',
      '20169454917' => '617762438141-CKBT',
      '20169457797' => '617762438141-SILY',
      '20169456645' => '617762438141-LEMO',
      '20169455941' => '617762438141-ENER',
      '20169455813' => '617762438141-CUCU',
      '20169456389' => '617762438141-GUMM',
      '20169454341' => '617762438141-APLP',
      '20169457349' => '617762438141-PEAR',
      '20169454277' => '617762438141-APPL',
      '20169456709' => '617762438141-LIME',
      '20169456453' => '617762438141-HNMI',
      '20169456133' => '617762438141-FRUI',
      '20169455877' => '617762438141-DULC',
      '20169454405' => '617762438141-APLR',
      '20169521029' => '617762438158-STRW',
      '20169517253' => '617762441066',
      '20169518597' => '617762438158-COCO',
      '20169520517' => '617762438158-PEPP',
      '20169518405' => '617762438158-CHOS',
      '20169518341' => '617762438158-CHRY',
      '20169519685' => '617762438158-JUJU',
      '20169519877' => '617762438158-MANG',
      '20169517829' => '617762438158-BLUE',
      '20169521541' => '617762438158-VNCP',
      '20169518149' => '617762438158-CRML',
      '20169517701' => '617762438158-BAVA',
      '20169518533' => '617762438158-CIND',
      '20169519941' => '617762438158-MARY',
      '20169517445' => '617762438158-APLP',
      '20169520581' => '617762438158-PINA',
      '20169519301' => '617762438158-GRPE',
      '20169521285' => '617762438158-SWED',
      '20169521669' => '617762438158-VNIC',
      '20169521349' => '617762438158-SWRS',
      '20169519557' => '617762438158-HNMI',
      '20169520069' => '617762438158-MOCH',
      '20169520837' => '617762441066-RUBY',
      '20169519749' => '617762438158-LEMO',
      '20169517893' => '617762438158-BUBB',
      '20169519493' => '617762438158-GUMM',
      '20169517317' => '617762438158-ACAI',
      '20169518277' => '617762438158-CHEE',
      '20169520005' => '617762438158-MINT',
      '20169521221' => '617762438158-SUGA',
      '20169518725' => '617762438158-COTT',
      '20169520453' => '617762438158-PEAR',
      '20169518981' => '617762438158-DULC',
      '20169518789' => '617762438158-CRNB',
      '20169520645' => '617762438158-PNPL',
      '20169517381' => '617762438158-APPL',
      '20169517637' => '617762438158-BANA',
      '20169520773' => '617762438158-RNCN',
      '20169557957' => '617762441073',
      '20169559429' => '617762438103-COTT',
      '20169561669' => '617762438103-STRC',
      '20169558533' => '617762438103-BLUE',
      '20169560965' => '617762438103-PECH',
      '20169558853' => '617762438103-CRML',
      '20169562501' => '617762438103-WHIT',
      '20169559877' => '617762438103-FROS',
      '20169562437' => '617762438103-WTRM',
      '20169558149' => '617762438103-APLP',
      '20169560389' => '617762438103-JUJU',
      '20169560453' => '617762438103-LEMO',
      '20169558277' => '617762438103-BNCR',
      '20169560645' => '617762438103-MARY',
      '20169558085' => '617762438103-APPL',
      '20169561221' => '617762438103-PEPP',
      '20169560005' => '617762438103-GRPE',
      '20169561477' => '617762438103-RNCN',
      '20169560517' => '617762438103-LIME',
      '20169558661' => '617762438103-BUTR',
      '20169561605' => '617762438103-SILY',
      '20169562245' => '617762438103-VNCP',
      '20169560197' => '617762438103-GUMM',
      '20169558981' => '617762438103-CHEE',
      '20169562053' => '617762438103-SWRS',
      '20169562117' => '617762438103-TSTD',
      '20169558725' => '617762438103-CKBT',
      '20169558405' => '617762438103-BAVA',
      '20169559045' => '617762438103-CHRY',
      '20169561733' => '617762438103-STRW',
      '20169560709' => '617762438103-MINT',
      '20169559365' => '617762438103-CKIE',
      '20169561925' => '617762438103-SUGA',
      '20169558021' => '617762438103-ACAI',
      '20169561349' => '617762438103-PNPL',
      '20169559301' => '617762438103-COCO',
      '20169560325' => '617762438103-HNDW',
      '20169559813' => '617762438103-FREN',
      '20169561797' => '617762438103-STRS',
      '20169559493' => '617762438103-CRNB',
      '20169558213' => '617762438103-APLR',
      '20169558597' => '617762438103-BUBB',
      '20169561285' => '617762438103-PINA',
      '20169560773' => '617762438103-MOCH',
      '20169560069' => '617762438103-GUVA',
      '20169559237' => '617762438103-CIND',
      '20169560581' => '617762438103-MANG',
      '20169558341' => '617762438103-BANA',
      '20169562373' => '617762438103-VNIC',
      '20169559109' => '617762438103-CHOS',
      '20169561413' => '617762438103-POME',
      '20169558469' => '617762438103-BELG',
      '20169559685' => '617762438103-DULC',
      '42125655184' => '617762441011',
      '42125655760' => '617762438929-BLUE',
      '42125655888' => '617762438929-BUTR',
      '42125657936' => '617762438929-THIN',
      '42125655696' => '617762438929-BELG',
      '42125658448' => '617762438929-PEPP',
      '42125659600' => '617762438929-VNIC',
      '42125656464' => '617762438929-CIND',
      '42125657616' => '617762438929-JUJU',
      '42125658960' => '617762438929-STRW',
      '42125659280' => '617762438929-SWRS',
      '42125658512' => '617762438929-PINA',
      '42125657808' => '617762438929-MANG',
      '42125657040' => '617762438929-FREN',
      '42125657680' => '617762438929-LEMO',
      '42125657552' => '617762438929-HNDW',
      '42125658896' => '617762438929-STRC',
      '42125656336' => '617762438929-CHOS',
      '42125656528' => '617762438929-COCO',
      '42126899024' => '766567229543-COCO',
      '42126901456' => '766567229543-STRW',
      '42126897680' => '617762441080',
      '42126901392' => '766567229543-STRC',
      '42126900560' => '766567229543-ORIC',
      '42126898768' => '766567229543-CHRY',
      '42126900496' => '766567229543-MOCH',
      '42126900432' => '766567229543-MINT',
      '42126898832' => '766567229543-CHOS',
      '42126900944' => '766567229543-PEPP',
      '42126898320' => '766567229543-BUBB',
      '42126899792' => '766567229543-GUVA',
      '42126899152' => '766567229543-COTT',
      '42126900048' => '766567229543-HNDW',
      '43543304656' => 'DSCNTND-B25',
      '43550551760' => 'DSCNTND-B25',
      '43550770832' => 'DSCNTND-B25',
      '43551561424' => 'DSCNTND-B150',
      '43557912208' => 'DSCNTND-B100',
      '43559580368' => 'DSCNTND-B25',
      '43560206288' => 'DSCNTND-B25',
      '43560273744' => 'DSCNTND-B25',
      '43616571088' => 'DSCNTND-B25',
      '43616734928' => 'DSCNTND-B150',
      '43616753680' => 'DSCNTND-B25',
      '43616767760' => 'DSCNTND-B25',
      '43618670608' => 'DSCNTND-B25',
      '43632084496' => 'DSCNTND-B50',
      '43632428944' => 'DSCNTND-B50',
      '43632428880' => 'DSCNTND-B25',
      '43632615184' => 'DSCNTND-B25',
      '43632646352' => 'DSCNTND-B25',
      '43632673744' => 'DSCNTND-B50',
      '43633146512' => 'DSCNTND-B50',
      '43633169168' => 'DSCNTND-B25',
      '43654753744' => 'DSCNTND-B25',
      '43654788880' => 'DSCNTND-B25',
      '10392898373' => '617762440984',
      '6307337093' => '617762438837-MINT',
      '19353490629' => 'DSCNTND',
      '19352347717' => 'DSCNTND',
      '19352337541' => 'DSCNTND',
      '19352308229' => 'DSCNTND',
      '19352015429' => 'DSCNTND',
      '19353536773' => 'DSCNTND',
      '6311178245' => '617762438868-PECH',
      '32146851088' => 'DSCNTND-DRB',
      '17982458501' => '617762434426',
      '17982163269' => '617762438059',
      '17982188485' => 'DSCNTND-SL1',
      '20189177413' => '617762436246',
      '20189723653' => '617762436291',
      '25210589136' => 'DSCNTND-CAP',
      '19352052549' => 'DSCNTND',
      '19352283781' => 'DSCNTND',
      '17982043781' => 'DSCNTND',
      '6310986373' => '617762438844-MARY',
      '6313966725' => '617762438837-STRW',
      '6307245573' => '617762438837-VNCP',
      '6310010373' => '617762438868-VNCP',
      '6307201093' => '617762438837-BLUE',
      '6311009797' => '617762438868-MARY',
      '6311288133' => '617762438868-PEPP',
      '6313972741' => '617762438844-STRW',
      '6310026757' => '617762438868-APPL',
      '6309893701' => '617762438844-VNCP',
      '6307533061' => '617762438837-MARY',
      '6311113797' => '617762438868-MINT',
      '6307321093' => '617762438837-GRPE',
      '6306918021' => '617762438837-APPL',
      '6307431173' => '617762438837-PEPP',
      '6309626821' => '617762438844-BLUE',
      '6313989701' => '617762438868-STRW',
      '6309874757' => '617762438844-CRUN',
      '6310045381' => '617762438844-APLP',
      '6311171909' => '617762438844-PECH',
      '6310590789' => '617762438868-GRPE',
      '6309702533' => '617762438868-CRUN',
      '6307359365' => '617762438837-PECH',
      '6311065413' => '617762438844-MINT',
      '6307225029' => '617762438837-CRUN',
    ];
  }

  /**
   * Returns a mapping for order items which product variants has empty SKU.
   *
   * @return array
   *   An array keyed by product variant id => SKU.
   */
  protected function getEmptyWholesaleSkuMapping() {
    return [
      '5419620171791' => '896932002669',
      '5419620270095' => '896932002171',
      '5419620302863' => '896932002720',
      '5419620073487' => '617762443244',
      '47740621967' => '617762438851-APLP',
      '47740324879' => '617762438851-UNIC',
      '47740593231' => '617762438851-CKBT',
      '47740450063' => '617762438851-BRRY',
      '47740621455' => '617762438851-MARY',
      '47740673487' => '617762438851-WTRM',
      '47740617935' => '617762438851-STRW',
      '47740618127' => '617762438882-STRW',
      '47740618063' => '617762438875-STRW',
      '47740617999' => '617762438868-STRW',
      '47740617871' => '617762438844-STRW',
      '47740617807' => '617762438837-STRW',
      '47740323663' => '617762438875-WTRN',
      '47740323599' => '617762438868-WTRN',
      '47740323535' => '617762438851-WTRN',
      '47740323471' => '617762438844-WTRN',
      '47740323407' => '617762438837-WTRN',
      '47740677135' => '617762440922',
      '47740677199' => '617762440939',
      '47740677391' => '617762440960',
      '47740621775' => '617762438905-MARY',
      '47740621711' => '617762438899-MARY',
      '47740621647' => '617762438882-MARY',
      '47740558159' => '617762438929-MARY',
      '47740555215' => '617762441004',
      '47740325135' => '617762438899-UNIC',
      '47740633423' => '617762438899-JUJU',
      '47740391503' => '617762438899-GRAP',
      '47740450319' => '617762438899-BRRY',
      '47740449999' => '617762438844-BRRY',
      '47740615567' => '617762438844-VNCP',
      '47740637263' => '617762438844-VNIC',
      '47740321231' => '617762438844-WTRS',
      '47740352079' => '617762438837-PRCR',
      '47740527823' => '617762438837-TIRA',
      '47740609679' => '617762438837-DULC',
      '47740659919' => '617762438837-COTT',
      '47740443535' => '617762438837-BRTH',
      '47740612943' => '617762438837-CHEE',
      '47740494223' => '617762438141-CHRY',
      '47740497743' => '617762438141-VNCU',
      '47740493711' => '617762438141-BLUE',
      '47740494607' => '617762438141-COTT',
      '47740493263' => '617762438141-APPL',
      '47740673359' => '617762438837-WTRM',
      '47740674895' => '617762440984',
      '47740598671' => '617762438837-HNDW',
      '47740391055' => '617762438837-GRAP',
      '47740393935' => '617762438837-GLAZ',
      '47740399055' => '617762438837-DRAF',
      '47740529807' => '617762438837-TANB',
      '47740632655' => '617762438837-JUJU',
      '47740673871' => '617762438837-FRUI',
      '47740324751' => '617762438837-UNIC',
      '47740621327' => '617762438837-MARY',
      '47740607119' => '617762438837-GUMM',
      '47740456271' => '617762438837-CERS',
      '47740613967' => '617762438837-BLUE',
      '47740504783' => '617762438134-WTRM',
      '47740504015' => '617762438134-STRC',
      '47740503567' => '617762438134-PEPP',
      '47740502543' => '617762438134-LEMO',
      '47740501071' => '617762438134-CHRY',
      '47740500495' => '617762438134-BLUE',
      '47740497295' => '617762438141-STRY',
      '47740496015' => '617762438141-ORIC',
      '47740495183' => '617762438141-GRPE',
      '47740678991' => '617762440977',
      '47740665231' => '617762438851-CHRY',
      '47740614095' => '617762438851-BLUE',
      '47740497231' => '617762438141-STRS',
      '47740497615' => '617762438141-TBCO',
      '47740497679' => '617762438141-VNCP',
      '47740494991' => '617762438141-FREN',
      '47740677007' => '617762441103',
      '47740673679' => '617762438882-WTRM',
      '47740673615' => '617762438875-WTRM',
      '47740673551' => '617762438868-WTRM',
      '47740673423' => '617762438844-WTRM',
      '47740593039' => '617762438844-CKBT',
      '47740476943' => '617762441073',
      '47740440335' => '617762438837-BLKH',
      '47740409103' => '617762438851-CERE',
      '47740408975' => '617762438837-CERE',
      '47740592911' => '617762438837-CKBT',
      '47740449935' => '617762438837-BRRY',
      '47740665615' => '617762438837-CRML',
      '47740618255' => '617762438905-STRW',
      '47740665423' => '617762438882-CHRY',
      '47740559823' => '617762438912-VNCP',
      '47740555791' => '617762438103-BLUE',
      '47740665551' => '617762438905-CHRY',
      '47740665487' => '617762438899-CHRY',
      '47740665935' => '617762438882-CRML',
      '47740614415' => '617762438905-BLUE',
      '47740497167' => '617762438141-STRW',
      '40062303183' => '617762434549',
      '40062302863' => '617762434570',
      '40062334031' => '617762440373',
      '881939546127' => '617762440786',
    ];
  }

}
